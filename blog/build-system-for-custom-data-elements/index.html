<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-blog">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Let’s Build a Core System for Custom Data Elements in FreeCAD | Ondsel</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ondsel.com/blog/build-system-for-custom-data-elements/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Let’s Build a Core System for Custom Data Elements in FreeCAD | Ondsel"><meta data-rh="true" name="description" content="One of the sorely missing features in FreeCAD is a convenient system for creating custom properties and interacting with them."><meta data-rh="true" property="og:description" content="One of the sorely missing features in FreeCAD is a convenient system for creating custom properties and interacting with them."><meta data-rh="true" property="og:image" content="https://ondsel.com/assets/images/titlecard-aec697e58940fac3ff4e3fc8a94c2fb0.png"><meta data-rh="true" name="twitter:image" content="https://ondsel.com/assets/images/titlecard-aec697e58940fac3ff4e3fc8a94c2fb0.png"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-06-24T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/prokoudine,https://github.com/AjinkyaDahale"><meta data-rh="true" property="article:tag" content="freecad,development"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ondsel.com/blog/build-system-for-custom-data-elements/"><link data-rh="true" rel="alternate" href="https://ondsel.com/blog/build-system-for-custom-data-elements/" hreflang="en"><link data-rh="true" rel="alternate" href="https://ondsel.com/blog/build-system-for-custom-data-elements/" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-37JG1KMTYS"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-37JG1KMTYS",{anonymize_ip:!0})</script>


<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Ondsel RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Ondsel Atom Feed">

<script src="https://boards.greenhouse.io/embed/job_board/js?for=ondsel"></script>
<script src="/js/get_os.js"></script><link rel="stylesheet" href="/assets/css/styles.932dc6ee.css">
<link rel="preload" href="/assets/js/runtime~main.c0c8fdb1.js" as="script">
<link rel="preload" href="/assets/js/main.c3681632.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar bg-grid-pattern navbar--fixed-top"><div class="wrapper"><div class="menu_button"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div><div class="navbar__inner"><div class="navbar__items navbar_layout"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Ondsel Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Ondsel Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items desktop text_gray"><a aria-current="page" class="text_gray navbar__item navbar__link navbar__link--active" href="/">Home</a><a class="text_gray navbar__item navbar__link" href="/pricing/">Pricing</a><a aria-current="page" class="text_gray navbar__item navbar__link navbar__link--active" href="/blog/">Blog</a><a class="text_gray navbar__item navbar__link" href="/support/">Support</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Company</a><ul class="dropdown__menu"><li><a class="text_gray dropdown__link" href="/about/">About Us</a></li><li><a class="text_gray dropdown__link" href="/team/">Team</a></li><li><a class="text_gray dropdown__link" href="/careers/">Careers</a></li><li><a class="text_gray dropdown__link" href="/handbook/">Handbook</a></li><li><a class="text_gray dropdown__link" href="/contact/">Contact</a></li></ul></div></div><div class="navbar__items navbar__items--right desktop text_gray"><a href="https://github.com/Ondsel-Development" target="_blank" rel="noopener noreferrer" class="text_gray navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_H2mL"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_eExm"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/catia-suffers-from-the-same-problems/">CATIA suffers from the same problems that Ondsel / FreeCAD are solving. And it&#x27;s expensive</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/sheetmetal-strategy/">Addons like SheetMetal need to be planned and developed like the rest of FreeCAD</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/native-ifc/">Autodesk’s way of handling the IFC standard is helping nobody</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/freecad-user-survey-results-part-3/">Over 75% of FreeCAD users are willing to pay to see it improved</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/path-wb-going-away/">The Path workbench in FreeCAD is going away. That&#x27;s good news</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://ondsel.com/assets/images/titlecard-aec697e58940fac3ff4e3fc8a94c2fb0.png"><header><h1 class="title_f1Hy" itemprop="headline">Let’s Build a Core System for Custom Data Elements in FreeCAD</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-06-24T00:00:00.000Z" itemprop="datePublished">June 24, 2023</time> · <!-- -->13 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/prokoudine" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/57467?v=4" alt="Alexandre Prokoudine"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/prokoudine" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Alexandre Prokoudine</span></a></div><small class="avatar__subtitle" itemprop="description">Contributing Writer</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/AjinkyaDahale" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Ajinkya Dahale</span></a></div><small class="avatar__subtitle" itemprop="description">Contributing Writer</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>One of the sorely missing features in FreeCAD is a convenient system for creating custom data elements and interacting with them.</p><p>A common use case is constraining multiple features in a sketch to the same value. Instead of tweaking every instance of a horizontal distance constraint, you would create a custom data element (or property) called “Length” and then reference it via the Expression Engine. Then every time you change the value of that custom element, the entire sketch is updated automatically.</p><p>This is an extremely handy feature, so there is a strong community demand for this. Most recently, it was brought up twice during the <a href="https://forum.freecad.org/viewtopic.php?t=75768" target="_blank" rel="noopener noreferrer">&quot;Complaint Session&quot;</a> at FOSDEM. And even a quick glance at the larger CAD market suggests that it’s useful for more than just a group of FreeCAD users: Inventor, SolidWorks, NX, Creo all have a way to create a custom data element and use it with expressions.</p><p>Much like with <a href="https://ondsel.com/blog/default-assembly-workbench-1" target="_blank" rel="noopener noreferrer">assemblies</a>, the community made several attempts to create a solution, but all of them have various shortcomings which we’ll discuss below.</p><p>Fixing this benefits the entire FreeCAD ecosystem. Users would get a convenient tool for manipulating their designs, it would be immediately available and maintained as an inherent part of the project. For companies like Ondsel who want to build around FreeCAD, this system is the prerequisite for integrating it into external services.</p><p>A large part of this system is therefore parameters introspection. This is a complicated topic that probably deserves a separate discussion. But the basic idea is this. When you design a real-life part, some of the custom data elements you create are convenience tools like in the use case above. They contribute to making the design truly parametric yet do not need to be accessed and manipulated externally. But when FreeCAD is used in headless mode in a pipeline, whatever external tools you rely on better be able to tell which properties they need to expose to the user (dimensions, color, material etc.) and which ones have to be omitted. Essentially, custom parameters need to carry some useful context.</p><p>So let’s talk about existing options, where they shine and fail, and what we think a sensible solution would look like based on what we learned.</p><p>In this post, we are also introducing another new author. Ajinkya Dahale has been a FreeCAD contributor since 2016. His contributions are mostly in the Sketcher, PartDesign, and FEM workbenches. Ajinkya’s latest major involvement, improving B-spline <a href="https://forum.freecad.org/viewtopic.php?t=71130" target="_blank" rel="noopener noreferrer">constraints</a> and <a href="https://forum.freecad.org/viewtopic.php?t=75950" target="_blank" rel="noopener noreferrer">construction</a>, was sponsored by the FreeCAD community both directly and <a href="https://blog.freecad.org/2022/09/26/first-fpa-sponsored-development/" target="_blank" rel="noopener noreferrer">via the FreeCAD Project Association</a>. He also received a <a href="https://opentoolchain.org/2023/02/26/FOSDEM-2023/" target="_blank" rel="noopener noreferrer">grant from the Open Toolchain Foundation</a>. Since early 2023, he has been working for Ondsel and continues hacking on FreeCAD.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="elements-or-properties">Elements or Properties?<a href="#elements-or-properties" class="hash-link" aria-label="Direct link to Elements or Properties?" title="Direct link to Elements or Properties?">​</a></h2><p>Before we get to the gist of the topic, we need to explain why we use the terminology “custom data elements” and not “custom properties” when we talk about the future system. Calling this type of data a property implies a particular solution — storing this data in the project tree and making it accessible for editing in the Combo View dock. But we are not yet certain this is exactly the way to do this. For now, we are using the term “custom data elements”.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="benchmark">Benchmark<a href="#benchmark" class="hash-link" aria-label="Direct link to Benchmark" title="Direct link to Benchmark">​</a></h2><p>To understand how well various existing solutions work, we need a kind of a benchmark — a realistic workflow that allows working with custom data elements efficiently. We can describe it with a <a href="https://en.wikipedia.org/wiki/User_story" target="_blank" rel="noopener noreferrer">user story</a>:</p><ol><li>The user begins to set the constraint and realizes they would like to make the value a custom field. The constraint panel would have a button to add a custom field.</li><li>The button would allow the user to add a new item to a collection of custom data elements.</li><li>The result would be returned and inserted via the Expression Engine.</li></ol><p>This workflow obviously applies to the Sketcher workbench, but there are many more use cases for custom data elements. You could be using them when designing a house, a 3D-printable part, or a part for CNC milling, or a thousand more things. So this better be a core feature.
There are multiple possible approaches to exposing custom data elements to users in the UI — pressing a shortcut to activate a floating window, editing an object in the document tree, or editing a value in a new tab in the property viewer. But for now, let’s call this a benchmark and see how existing solutions stack up against it.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="existing-solutions">Existing solutions<a href="#existing-solutions" class="hash-link" aria-label="Direct link to Existing solutions" title="Direct link to Existing solutions">​</a></h2><p>We found 4 attempts to implement this feature.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-spreadsheet-workbench">The Spreadsheet workbench<a href="#the-spreadsheet-workbench" class="hash-link" aria-label="Direct link to The Spreadsheet workbench" title="Direct link to The Spreadsheet workbench">​</a></h3><p>This WB was designed for many uses, so it’s not entirely fair to call it a custom data elements system. The workbench has two major benefits: it’s both powerful (e.g. cells in the spreadsheet can contain expressions) and it’s already part of FreeCAD, available immediately after program’s installation.</p><p><img loading="lazy" alt="The Spreadsheet workbench in FreeCAD" src="/assets/images/spreadsheet-wb-in-freecad-3b7d1d264cd5b4fd6c87e83319c2df71.png" width="753" height="571" class="img_ev3q"></p><p>The way spreadsheets work in FreeCAD, this is the assumed workflow:</p><ol><li>The user exits Sketcher</li><li>Switches to the Spreadsheet workbench</li><li>Creates a spreadsheet</li><li>Double-clicks the spreadsheet in the tree</li><li>Selects a cell and enters a value</li><li>Selects the cell a second time</li><li>Clicks the button to set an alias</li><li>Types in the alias name and presses OK</li><li>Double-clicks the sketch icon in the tree to reopen Sketcher</li><li>Selects the constraint and uses the Expression Engine to reference the aliased cell</li></ol><p>Compared to the benchmark above, this isn’t very user-friendly. FreeCAD contributors attempted to make their life easier by <a href="https://wiki.freecad.org/Macro_EasyAlias" target="_blank" rel="noopener noreferrer">simplifying alias creation</a>, but that fixes only a small portion of issues with spreadsheets. While we definitely can improve its subpar performance and UX/UI, tables are still not very convenient for extracting values without launching FreeCAD and using its GUI.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="property-bag-in-path">Property Bag in Path<a href="#property-bag-in-path" class="hash-link" aria-label="Direct link to Property Bag in Path" title="Direct link to Property Bag in Path">​</a></h3><p>This feature is part of the default FreeCAD’s Path workbench. You can create groups of properties, which is convenient when you have a lot of those, and there is a sensible choice of property types available.</p><p><img loading="lazy" alt="Groups of properties in Property Bag" src="/assets/images/propertybag-groups-of-properties-206907fbd34728d83da07c360ceecfe5.png" width="832" height="676" class="img_ev3q"></p><p>But while custom properties in the “bag” are perfectly accessible from other workbenches via the Expression Engine, you can only create and modify properties when you are in the Path workbench. So it’s not competitive against the benchmark. This feature is also written in Python, so it’s entirely possible it would have to be ripped out of Path and rewritten in C++.</p><p><img loading="lazy" alt="Editing properties in Property Bag" src="/assets/images/property-bag-editing-properties-46df2f5d64594309adf6c9db5f91e280.png" width="832" height="676" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-dynamicdata-workbench">The DynamicData workbench<a href="#the-dynamicdata-workbench" class="hash-link" aria-label="Direct link to The DynamicData workbench" title="Direct link to The DynamicData workbench">​</a></h3><p>This is a <a href="https://github.com/mwganson/DynamicData" target="_blank" rel="noopener noreferrer">3rd party add-on</a> that allows creating project-level custom properties accessible through the Expression Engine from any workbench. You can create any number of containers of properties, one per each object if you like. There is a very long list of property types available.</p><p><img loading="lazy" alt="The DynamicData workbench in FreeCAD" src="/assets/images/dynamic-data-ui-6803e93f6ef98291a70b54086d310aac.png" width="2560" height="1440" class="img_ev3q"></p><p>Workflow-wise, this is not a very convenient solution. There are some cosmetic UX issues (e.g. you have to switch to this workbench first for the toolbar to show in other workbenches), but we can deal with those. What’s worse is that properties can’t be added on the fly, while you are sketching in 2D.</p><p>Theoretically, DynamicData could work as a foundation for a better solution. However:</p><ul><li>The WB is written in Python, but FreeCAD needs this as a core feature, hence it should most likely be C++ code.</li><li>The entire feature set is only accessible via GUI, which is not great for running FreeCAD in headless mode.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="userdata-in-assembly-4">UserData in Assembly 4<a href="#userdata-in-assembly-4" class="hash-link" aria-label="Direct link to UserData in Assembly 4" title="Direct link to UserData in Assembly 4">​</a></h3><p>The variables system in the Assembly 4 workbench is designed primarily for creating animations in the viewport. Here is how it works:</p><ol><li>Create a variable like “rotation”</li><li>Pick a part, set its rotation value to use the variable via the Expression Engine</li><li>Open the animation dialog, set start/end values, set step size</li><li>Run the animation</li></ol><p><img loading="lazy" alt="UserData in Assembly 4" src="/assets/images/assembly4-user-data-469f7d9f9e45e9799dea9f4c6574f684.png" width="1065" height="609" class="img_ev3q"></p><p>The core system behind this feature is capable. The list of possible data types can (and should) be extended, but it’s good for a start. There are some small issues. E.g. there’s no way to edit an existing variable, the user can only create and delete them.</p><p>A much larger issue is that the feature is workbench-specific and written in Python. Thus, it would have to be extracted from the Assembly 4 code and most likely rewritten in C++. Then we’d have to write an entirely new UI on top of it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h3><p>Reusing any of the existing solutions we explored seems unlikely for the following reasons:</p><ol><li><p>For the most part, they are not part of the FreeCAD core. The DynamicData and Assembly 4 workbenches need to be installed separately, and in case of Property Bag, the functionality needs to be moved out of the Path workbench and generalized.</p></li><li><p>None of the 4 solutions here are accessible from C++ code, so no core feature can use custom data elements. So far, this hasn&#x27;t really been an issue, but it’s best to build future-proof core features.</p></li><li><p>For the Python interface, there should be some sort of keyword-based system to set these values to these custom data elements. This way users can skip certain parameters like description.</p></li><li><p>Custom data elements in existing solutions carry no context. This makes it difficult for an external tool to sift through available parameters and pick the ones that should be exposed to users in the UI of that external tool. This can be resolved by making the user create a specific kind of document object or name it a certain way, but it would put an unnecessary cognitive burden on users.</p></li><li><p>The Spreadsheet workbench is the only core feature among the ones we studied. Spreadsheet serves and important role and isn’t going anywhere.  However its UX is so far from the assumed workflow and so inaccessible from CLI that we shouldn’t try to force it to serve this purpose.  In fact, Spreadsheet may be come even more useful in conjunction with a core data element feature.</p></li></ol><p>In a nutshell, there’s no existing solution that can be used as-is.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-the-solution-should-look-like">What The Solution Should Look Like<a href="#what-the-solution-should-look-like" class="hash-link" aria-label="Direct link to What The Solution Should Look Like" title="Direct link to What The Solution Should Look Like">​</a></h2><p>After analyzing existing solutions (including those of proprietary CAD programs), some obvious use cases, as well as user requests, we came up with the following list of requirements for a native custom data elements system in FreeCAD.</p><p>Architecturally, there should be a single container with a possibility to create groups of data elements inside it.
Secondly, there’s the topic of element types. The system should support all core data types: Length, Angle, Enum, String etc.</p><p>When we start thinking about this from users’ standpoint, this is where things get a little vague. There are benefits to having elements as properties in the project tree, but a kind of a dedicated registry or central management tool  (SolidWorks-style) makes about as much sense. What we are certain of is that:</p><ul><li>Adding new data elements from Sketcher and other WBs should be simple and obvious.</li><li>Tooltips for data elements should be possible so that collaborators could figure out your project easily.</li><li>Expression Engine should be supported.</li></ul><p>When we talk about adding data elements easily, what we mean is that users should be able to create those from anywhere in the application and in the middle of a transaction like editing a sketch. Think of the way you can create named parameters in Inventor by just typing “Length=530mm” in the constraint input box to create a linked “Length” property and setting it to 530mm.</p><p>Moreover, users should be able to create and access custom data elements through CLI so that models could be adjusted when FreeCAD is running remotely, and possibly automated as macros. Example: load a gridfinity template, set the number of height units, choose a color, output an STL, send it to OctoPrint.</p><p>Finally, on a more technical note, users should be able to create and access custom data elements from code in either C++ or Python. That is, the feature should be accessible for core features, default workbenches, and 3rd party workbenches. This can be ensured by creating the framework in C++ and adding Python bindings.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="our-proposal">Our Proposal<a href="#our-proposal" class="hash-link" aria-label="Direct link to Our Proposal" title="Direct link to Our Proposal">​</a></h2><p>We see this as a multi-stage project with work on expanding the FreeCAD file format accordingly, programming a C++ class and Python bindings, as well as designing and implementing the user interface. We have already settled on the document structure for our proposal — a single container with custom data elements, just like we mentioned above.
3rd-party developers would be able to use C++ or Python to access custom data elements: get a list of them, create a new data element, or get an existing one and then set a value to it. This is how we picture the custom data elements can be accessed through Python:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">my_doc = App.ActiveDocument()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_doc.CustomData # The container for Custom Data elements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_doc.CustomData.setProperty(“App::PropertyFloat”, name=”myDim”, 1.23) # Setting a double</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_doc.CustomData.getProperty(“myDim”) # Getting the value of the property</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_doc.CustomData.setProperty(“App::PropertyString”, “myText”, “hello”, desc=”Text to be printed on name plate”) # Setting a string with description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_doc.CustomData.setProperty(“App::PropertyEnum”, “myEnum”, value=0, enum_values=[“Option1”, “Option2”, “Option3”]) # Setting an enum along with the values it can take. Selected value is “Option1”.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_doc.CustomData.setProperty(“App::PropertyEnum”, “myEnum”, value=”Option1”, enum_values=[“Option1”, “Option2”, “Option3”]) # Setting an enum along with the values it can take (alternative)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>An (incomplete) example implementation is available in <a href="https://github.com/Ondsel-Development/FreeCAD/tree/core-custom-data" target="_blank" rel="noopener noreferrer">this branch</a>.
We think that users who rely on external tools for interacting with FreeCAD projects should be able to make a choice which custom data elements should be seen as private and which should be seen as public. This distinction is somewhat artificial, because everything is open in FreeCAD files. But it provides a simple way for external tools to expose only a subset of custom data elements — the ones that are supposed to be interacted with in UI. This is what we want Ondsel’s cloud service to do when it comes to mass customization of designs.</p><p>We are still figuring out the interaction model and the UI. The quick and dirty solution is to add those to a new tab called “Custom” right next to “View” and “Data” in the left dock. This can work as a simple temporary solution, but we think the View/Data separation is a superficial one and needs to be done away with (a story for another day). When a user uploads a document to our web view and sets only one dimension of the project to ‘public’ (e.g. only the length of a box but not its width or height), we expect that other users viewing this document would get to control only that dimension.</p><p>Here is an early UI wireframe:</p><p><img loading="lazy" alt="Early UI wireframe for custom data elements" src="/assets/images/preliminary-ui-wireframe-00cd20ff132cec30b2fbe28fa7df223b.png" width="1660" height="784" class="img_ev3q"></p><p>There are other approaches to designing the interaction, like what Inventor and Fusion 360 do with the properties table.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-you-can-get-involved">How You Can Get Involved<a href="#how-you-can-get-involved" class="hash-link" aria-label="Direct link to How You Can Get Involved" title="Direct link to How You Can Get Involved">​</a></h2><p>We are interested in general feedback about our proposal, but we are also specifically looking for your input on these two topics:</p><ul><li>What are your use cases for custom data elements? What kind of problems do you try to solve with those?</li><li>What are your frustrations with both existing solutions in FreeCAD and other CAD programs?</li></ul><p>This would help us build a sensible interaction model and user interface for custom data elements in FreeCAD. Please provide your feedback in the <a href="https://github.com/Ondsel-Development/FreeCAD/issues/5" target="_blank" rel="noopener noreferrer">issue tracker</a>.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/freecad/">freecad</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/development/">development</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/software-bounties-are-a-dumb-idea/"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Software bounties are a dumb idea</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/freecad-needs-a-better-materials-system/"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">FreeCAD Needs A Better Materials System</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#elements-or-properties" class="table-of-contents__link toc-highlight">Elements or Properties?</a></li><li><a href="#benchmark" class="table-of-contents__link toc-highlight">Benchmark</a></li><li><a href="#existing-solutions" class="table-of-contents__link toc-highlight">Existing solutions</a><ul><li><a href="#the-spreadsheet-workbench" class="table-of-contents__link toc-highlight">The Spreadsheet workbench</a></li><li><a href="#property-bag-in-path" class="table-of-contents__link toc-highlight">Property Bag in Path</a></li><li><a href="#the-dynamicdata-workbench" class="table-of-contents__link toc-highlight">The DynamicData workbench</a></li><li><a href="#userdata-in-assembly-4" class="table-of-contents__link toc-highlight">UserData in Assembly 4</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></li><li><a href="#what-the-solution-should-look-like" class="table-of-contents__link toc-highlight">What The Solution Should Look Like</a></li><li><a href="#our-proposal" class="table-of-contents__link toc-highlight">Our Proposal</a></li><li><a href="#how-you-can-get-involved" class="table-of-contents__link toc-highlight">How You Can Get Involved</a></li></ul></div></div></div></div></div><footer class="footer bg-transparent footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col flex footer-layout"><div><div class="footer__title">Contact Us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:contact@ondsel.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">contact@ondsel.com<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/ondsel" target="_blank" rel="noopener noreferrer" class="footer__link-item">facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/ondsel" target="_blank" rel="noopener noreferrer" class="footer__link-item" title="Follow us on X"><svg viewBox="0 0 24 24" width="18px"><g><path fill="white" d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></g></svg><svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_node_modules-@docusaurus-theme-classic-lib-theme-Icon-ExternalLink-styles-module" style="vertical-align: text-top;"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="col footer__col flex footer-layout"><div><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/privacy/">Privacy Policy</a></li><li class="footer__item"><a class="footer__link-item" href="/tos/">Terms of Service</a></li></ul></div></div><div class="col footer__col flex footer-layout"><div><div class="footer__title">FreeCAD</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://freecad.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/FreeCAD" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div><div class="footer__bottom copy_right text--center"><div class="footer__copyright">Copyright © 2024 Ondsel, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c0c8fdb1.js"></script>
<script src="/assets/js/main.c3681632.js"></script>
</body>
</html>