<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-blog">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">One post tagged with &quot;addons&quot; | Ondsel</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ondsel.com/blog/tags/addons"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="One post tagged with &quot;addons&quot; | Ondsel"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ondsel.com/blog/tags/addons"><link data-rh="true" rel="alternate" href="https://ondsel.com/blog/tags/addons" hreflang="en"><link data-rh="true" rel="alternate" href="https://ondsel.com/blog/tags/addons" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-37JG1KMTYS"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-37JG1KMTYS",{anonymize_ip:!0})</script>


<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Ondsel RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Ondsel Atom Feed">
<script src="https://boards.greenhouse.io/embed/job_board/js?for=ondsel"></script><link rel="stylesheet" href="/assets/css/styles.f53707ae.css">
<link rel="preload" href="/assets/js/runtime~main.feba1e63.js" as="script">
<link rel="preload" href="/assets/js/main.e7cb5baf.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar bg-grid-pattern navbar--fixed-top"><div class="wrapper"><div class="menu_button"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div><div class="navbar__inner"><div class="navbar__items navbar_layout"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Ondsel Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Ondsel Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items desktop text_gray"><a class="text_gray navbar__item navbar__link" href="/">Home</a><a class="text_gray navbar__item navbar__link" href="/about">About Us</a><a class="text_gray navbar__item navbar__link" href="/pricing">Pricing</a><a class="text_gray navbar__item navbar__link" href="/contact">Contact</a><a class="text_gray navbar__item navbar__link" href="/careers">Careers</a><a aria-current="page" class="text_gray navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right desktop text_gray"><a href="https://github.com/Ondsel-Development" target="_blank" rel="noopener noreferrer" class="text_gray navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_H2mL"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_eExm"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/floating-input-widgets">FreeCAD sketcher getting a major upgrade with floating input widgets</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/hard-lessons">Autodesk is teaching students hard life-lessons about vendor lock-in</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/how-to-build-3rd-party-addons-for-freecad-that-don’t-suck">How to build 3rd-party addons for FreeCAD that don’t suck</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ondsel-made-constraining-sketches-faster-and-easier">Ondsel made constraining sketches faster and easier</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/merge-meeting">Live merge meetings: What we learned from merging 75 Pull Requests in 30 days</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>One post tagged with &quot;addons&quot;</h1><a href="/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://ondsel.com/assets/images/titlecard-1d3d1fb4e1ecd51ef6e1c30d218d1bf4.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/how-to-build-3rd-party-addons-for-freecad-that-don’t-suck">How to build 3rd-party addons for FreeCAD that don’t suck</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-10-13T00:00:00.000Z" itemprop="datePublished">October 13, 2023</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/sliptonic" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/538057?v=4" alt="Brad Collette"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/sliptonic" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Brad Collette</span></a></div><small class="avatar__subtitle" itemprop="description">Ondsel Core Team</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/prokoudine" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/57467?v=4" alt="Alexandre Prokoudine"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/prokoudine" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Alexandre Prokoudine</span></a></div><small class="avatar__subtitle" itemprop="description">Contributing Writer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>How to build 3rd-party addons for FreeCAD that don’t suck
There’s well over 200 various addons for FreeCAD available just in the official add-on manager. Many more possibly flew under the radar or simply never have been shared with anybody.</p><p>For some developers, creating an add-on is a way to test ideas and see if they resonate with a larger audience. For others, it’s the first step towards contributing to FreeCAD itself. The add-on ecosystem is hugely important for the community at large.</p><p>But many great ideas die because the add-on implementation suffers from one or more common and avoidable mistakes:</p><ul><li>Not designed to make contributions from other developers easy.</li><li>Built with implementations of things that are core FreeCAD features.</li><li>Not built with good software practices in mind, think modular code, unit tests, separation of UI and non-UI logic.</li></ul><p>This isn’t a criticism of the addon developers.  Nobody is expert in everything for many open-source contributors, writing an Add-on is their first experience contributing to a large project.</p><p>Over the last decade, I patched other people’s add-ons and wrote some of my own. In this post, I’d like to share what I think are best practices of developing 3rd-party add-ons for FreeCAD. There’s a technical and a design aspect to this.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="technical-advice">Technical advice<a href="#technical-advice" class="hash-link" aria-label="Direct link to Technical advice" title="Direct link to Technical advice">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="design-the-ui-with-qt-creator-and-use-the-ui-files-directly">Design the UI with QT Creator and use the .ui files directly.<a href="#design-the-ui-with-qt-creator-and-use-the-ui-files-directly" class="hash-link" aria-label="Direct link to Design the UI with QT Creator and use the .ui files directly." title="Direct link to Design the UI with QT Creator and use the .ui files directly.">​</a></h3><p>There are several reasons why this is a great idea. First off, this makes the code simpler. Hundreds of lines of Qt code are replaced with a single line to load the .ui file like:</p><p><code>Form = FreeCADGui.PySideUic.loadUi(dialog.ui)</code></p><p>The UI logic becomes much cleaner and more testable. Secondly, UI designers are used to working with visual tools.  They can often improve the look and feel of a dialog or task panel quickly. Using the UI files directly rather than hand-coding Qt or converting the .ui file to python makes it much easier for UI designers to contribute.  The wiki has <a href="https://wiki.freecad.org/Manual:Creating_interface_tools" target="_blank" rel="noopener noreferrer">lots of information</a> about designing and using .ui files.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="separate-the-ui-logic-from-the-application-logic">Separate the UI logic from the application logic.<a href="#separate-the-ui-logic-from-the-application-logic" class="hash-link" aria-label="Direct link to Separate the UI logic from the application logic." title="Direct link to Separate the UI logic from the application logic.">​</a></h3><p>From the beginning, FreeCAD was designed to run without the GUI at all.  It’s amazing how much you can do with FreeCAD by calling it from external scripts.  So it’s really frustrating to find a great piece of addon functionality that won’t work this way.</p><p>Ideally, the UI logic is separated from the rest of the application code.  Designing software this way doesn’t come naturally to amateur programmers but it isn’t too difficult and is worth learning. Even a very simple addon or workbench should have at least two Python modules, one with the logic for managing the UI, getting input from the user, and displaying it. The second module does all the interesting stuff, and it should not import FreeCADGui.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stick-with-rules-of-thumb">Stick with rules of thumb<a href="#stick-with-rules-of-thumb" class="hash-link" aria-label="Direct link to Stick with rules of thumb" title="Direct link to Stick with rules of thumb">​</a></h3><p>There are some very simple rules that help keep the code clean, readable, and testable.  Like all heuristics, they aren’t written in stone and there are times to ignore them.  That said, take the time to understand why they exist.</p><p><strong>No function longer than 200 lines of code.</strong> There are various recommendations regarding the length of a function, but 200 LOC seems like a reasonable maximum. The general idea is that a function should do just one logical thing and could be explained in one sentence. This <a href="https://stackoverflow.com/posts/475762/revisions" target="_blank" rel="noopener noreferrer">list of red flags</a> for when a function is too long should serve you well (thanks to Ryan Delucchi).</p><p><strong>No module longer than 1K lines of code.</strong> For pretty much the same reason — readability, maintainability etc. — Python modules shouldn’t be too long.  Keeping python modules short has a subtle effect on code organization. It naturally encourages better encapsulation and separation of concerns, two key concepts in software development.</p><p><strong>Write pythonic code.</strong> Unlike communities around other programming languages, the Python community, is very opinionated about code conventions. Adhering to these conventions makes Python code more readable and more efficient.  Here is a <a href="https://towardsdatascience.com/how-to-write-pythonic-code-208ec1513c49" target="_blank" rel="noopener noreferrer">very good overview</a> by Xiaoxu Gao of what makes code in Python “pythonic”.</p><p><strong>Use Black formatting.</strong> Code formatting is sometimes a contentious issue.  Part of being ‘pythonic’ is adhering to a community standard for formatting. The standard is formalized in <a href="https://peps.python.org/pep-0008/" target="_blank" rel="noopener noreferrer">PEP 8</a> which asserts a number of code style conventions.   Pycodestyle will check your code against those standards (and complain when you break them). <a href="https://github.com/psf/black" target="_blank" rel="noopener noreferrer">Black</a> automatically reformats your Python code to comply with those conventions.</p><p><strong>Write unit tests first.</strong> Nobody likes writing unit tests but everyone likes having them.  Regressions are easy to introduce and difficult to catch. Unit tests invert that by making regressions harder to introduce and easier to solve. They also have a subtle effect on how you program. When you have to write unit tests, you start to write more testable code. So write unit tests early on to stay on top of it.</p><p><strong>Make UI translatable from day 1.</strong> Popular addons tend to get translated into other languages. Designing an addon with localization in mind from the beginning means you free yourself from redesigning it later on to introduce UI translation support.</p><p><strong>Make user-facing objects parametric.</strong> If the addon adds document objects to the project and expects the user to interact with them after creation, the important attributes of the object should be exposed through properties.  We’ve seen good ideas implemented in such a way that if the user makes an error during the creation of an object, the only recourse is to delete the object and restart.  If the creation of an object involves a task panel, double-clicking on the object in the tree should re-open the same task panel and allow the user to change settings.   FreeCAD wiki has an <a href="https://wiki.freecad.org/Create_a_FeaturePython_object_part_I" target="_blank" rel="noopener noreferrer">article</a> that explains how to write FeaturePython objects the right way.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="be-on-the-lookout-for-things-that-belong-in-the-core">Be on the lookout for things that belong in the core<a href="#be-on-the-lookout-for-things-that-belong-in-the-core" class="hash-link" aria-label="Direct link to Be on the lookout for things that belong in the core" title="Direct link to Be on the lookout for things that belong in the core">​</a></h3><p>Occasionally features developed in a workbench really <em>should</em> exist in the core. A good example of that is the <a href="https://github.com/shaise/FreeCAD_SheetMetal" target="_blank" rel="noopener noreferrer">Sheetmetal workbench</a>. There’s an interesting bit of logic that unfolds a shape to produce a flattened version. The unfolder is computationally intense and would benefit from being implemented in C++ rather than Python. A powerful and efficient unfolder might also have utility in other workbenches. It sure takes more time and effort to communicate with other developers, get these things written correctly and merged, but it makes addons simpler, faster, and more maintainable.</p><p>On the other hand, be on the lookout for things that already <em>are</em> in the core. Inexperienced developers often reinvent the wheel and do it poorly. Experienced developers communicate a lot. So when you design an addon, talk to your peers and discuss your design. It could very well be the case that something you need or already exists and works just right for you.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="design-advice">Design advice<a href="#design-advice" class="hash-link" aria-label="Direct link to Design advice" title="Direct link to Design advice">​</a></h2><p>FreeCAD has the <a href="https://freecad.github.io/DevelopersHandbook/stylebook/" target="_blank" rel="noopener noreferrer">beginnings of a style book</a>. While work on it is ongoing, here are some important considerations.</p><p><strong>Don&#x27;t make the user think.</strong> In free and open-source software, the concepts of usability and discoverability are often overlooked. Do your best to design an addon with a straightforward workflow that gets users from A to Z in the least possible amount of time. Give the user a result with the minimal amount of input and let them revise and improve the result incrementally. A feature that requires the user to do many things exactly right before outputting anything at all is confusing and will be ignored by most users.</p><p><strong>Chunking.</strong>  If there’s one thing you can do to make your user-interface and workflow better it is to group controls together so users can process them efficiently.</p><ul><li>Toolbars should have neither too many nor too few buttons. Seven, plus or minus two, is a guideline often invoked.</li><li>The buttons should be grouped logically.  Consider that the user may hide the toolbar or drag it to another part of the screen.  Menus should use separators to make them easier to process.</li><li>Dialogs should use group boxes, frames, and tabs to allow efficient recognition of controls.</li></ul><p><strong>Don’t just gravitate to workbenches.</strong> There seems to be a popular idea that a workbench is the right kind of addon for anything. And so there are some 3rd-party workbenches that should have been a non-workbench addon,  an extension of an existing workbench, or even a core feature. But workbenches are destinations, if you build one, you should expect that people will park there for a while and will be unwilling to jump between workbenches all the time. So when you choose what type of an addon you are creating, think primarily of workflow and tasks.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-to-do-next">What to do next<a href="#what-to-do-next" class="hash-link" aria-label="Direct link to What to do next" title="Direct link to What to do next">​</a></h2><p>If you are planning to write a new FreeCAD addon or improve one you have already created, I recommend paying close attention to <a href="https://freecad.github.io/DevelopersHandbook/" target="_blank" rel="noopener noreferrer">FreeCAD Developer Guide</a>. This is where the team formalizes both programming and design conventions, as well as provides actionable advice. If the guide is missing the information you need, I encourage you to <a href="https://github.com/FreeCAD/DevelopersHandbook/issues" target="_blank" rel="noopener noreferrer">file an issue</a> against the guide on GitHub.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/freecad">freecad</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/development">development</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/addons">addons</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer bg-transparent footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col flex footer-layout"><div><div class="footer__title">Contact Us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/ondsel" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="mailto:contact@ondsel.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">contact@ondsel.com<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/ondsel" target="_blank" rel="noopener noreferrer" class="footer__link-item">facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="col footer__col flex footer-layout"><div><div class="footer__title">FreeCAD</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://freecad.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/FreeCAD" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div><div class="footer__bottom copy_right text--center"><div class="footer__copyright">Copyright © 2023 Ondsel, Inc. </div></div></div></footer></div>
<script src="/assets/js/runtime~main.feba1e63.js"></script>
<script src="/assets/js/main.e7cb5baf.js"></script>
</body>
</html>